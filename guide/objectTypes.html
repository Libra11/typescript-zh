<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/logo.png"><title>对象类型 | Typescript中文</title><meta name="description" content="对象类型">
    <link rel="preload" href="/typescript-zh/assets/style-1d0b7965.css" as="style"><link rel="stylesheet" href="/typescript-zh/assets/style-1d0b7965.css">
    <link rel="modulepreload" href="/typescript-zh/assets/app-b562695e.js"><link rel="modulepreload" href="/typescript-zh/assets/framework-1cb228a4.js"><link rel="modulepreload" href="/typescript-zh/assets/objectTypes.html-e435cd10.js"><link rel="modulepreload" href="/typescript-zh/assets/objectTypes.html-0d23a926.js"><link rel="prefetch" href="/typescript-zh/assets/index.html-3a29c4d1.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/basic.html-f1ee674c.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/classes.html-772d531e.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/conditionalTypes.html-cb955a91.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/creatingTypesfromTypes.html-f8f4c46c.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/everydayTypes.html-75ca561d.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/generics.html-ebcfb062.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/indexedAccessTypes.html-48173ac0.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/keyofTypeOperator.html-806ed51d.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/mappedTypes.html-375a53bd.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/moreOnFunctions.html-98af158f.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/narrowing.html-5c70665b.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/templateLiteralTypes.html-b426ab5c.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/typeofTypeOperator.html-159aec47.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/404.html-e7f61752.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/index.html-785a9be7.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/basic.html-5de7ac5f.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/classes.html-cc734b19.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/conditionalTypes.html-f44ad87b.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/creatingTypesfromTypes.html-059a28bc.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/everydayTypes.html-a28316ac.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/generics.html-7052bfba.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/indexedAccessTypes.html-cfaf1668.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/keyofTypeOperator.html-c15d7f2a.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/mappedTypes.html-268a8add.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/moreOnFunctions.html-9a82fadf.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/narrowing.html-9eef512f.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/templateLiteralTypes.html-1ec0dd1a.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/typeofTypeOperator.html-f596630e.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/404.html-a3509199.js" as="script"><link rel="prefetch" href="/typescript-zh/assets/SearchResult-3964a328.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/typescript-zh/" class=""><img class="logo" src="/typescript-zh/images/logo.png" alt="Typescript中文"><span class="site-name can-hide">Typescript中文</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/typescript-zh/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/typescript-zh/guide/basic.md" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">搜索</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/typescript-zh/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/typescript-zh/guide/basic.md" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">指南 <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/typescript-zh/guide/basic.html" class="sidebar-item" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a><!----></li><li><a href="/typescript-zh/guide/everydayTypes.html" class="sidebar-item" aria-label="常用类型"><!--[--><!--]--> 常用类型 <!--[--><!--]--></a><!----></li><li><a href="/typescript-zh/guide/narrowing.html" class="sidebar-item" aria-label="类型约束"><!--[--><!--]--> 类型约束 <!--[--><!--]--></a><!----></li><li><a href="/typescript-zh/guide/moreOnFunctions.html" class="sidebar-item" aria-label="关于函数的更多内容"><!--[--><!--]--> 关于函数的更多内容 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/typescript-zh/guide/objectTypes.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="对象类型"><!--[--><!--]--> 对象类型 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item collapsible">类型操作 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/typescript-zh/guide/creatingTypesfromTypes.html" class="sidebar-item" aria-label="从类型中创建类型"><!--[--><!--]--> 从类型中创建类型 <!--[--><!--]--></a><!----></li><li><a href="/typescript-zh/guide/generics.html" class="sidebar-item" aria-label="泛型"><!--[--><!--]--> 泛型 <!--[--><!--]--></a><!----></li><li><a href="/typescript-zh/guide/keyofTypeOperator.html" class="sidebar-item" aria-label="keyof类型运算符"><!--[--><!--]--> keyof类型运算符 <!--[--><!--]--></a><!----></li><li><a href="/typescript-zh/guide/typeofTypeOperator.html" class="sidebar-item" aria-label="typeof类型运算符"><!--[--><!--]--> typeof类型运算符 <!--[--><!--]--></a><!----></li><li><a href="/typescript-zh/guide/indexedAccessTypes.html" class="sidebar-item" aria-label="索引访问类型"><!--[--><!--]--> 索引访问类型 <!--[--><!--]--></a><!----></li><li><a href="/typescript-zh/guide/conditionalTypes.html" class="sidebar-item" aria-label="条件类型"><!--[--><!--]--> 条件类型 <!--[--><!--]--></a><!----></li><li><a href="/typescript-zh/guide/mappedTypes.html" class="sidebar-item" aria-label="映射类型"><!--[--><!--]--> 映射类型 <!--[--><!--]--></a><!----></li><li><a href="/typescript-zh/guide/templateLiteralTypes.html" class="sidebar-item" aria-label="模板字面量类型"><!--[--><!--]--> 模板字面量类型 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/typescript-zh/guide/classes.html" class="sidebar-item" aria-label="类"><!--[--><!--]--> 类 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><p>在 <code>JavaScript</code> 中，我们将数据分组并传递给其他部分的基本方式是通过对象。在 <code>TypeScript</code> 中，我们使用对象类型来表示它们。</p><p>正如我们所见，它们可以是匿名的：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;Hello &quot;</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者可以通过使用接口来命名：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token operator">:</span> Person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;Hello &quot;</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者使用类型别名：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token operator">:</span> Person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;Hello &quot;</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在上面的三个示例中，我们编写了函数，它们接受包含属性 <code>name</code>（必须是字符串）和 <code>age</code>（必须是数字）的对象。</p><h2 id="属性修饰符" tabindex="-1"><a class="header-anchor" href="#属性修饰符" aria-hidden="true">#</a> 属性修饰符</h2><p>对象类型中的每个属性都可以指定几个内容：类型、属性是否可选以及属性是否可以写入。</p><h3 id="可选属性" tabindex="-1"><a class="header-anchor" href="#可选属性" aria-hidden="true">#</a> 可选属性</h3><p>在大多数情况下，我们需要处理可能已设置属性的对象。在这种情况下，我们可以通过在名称后面添加问号（<code>?</code>）来将这些属性标记为可选。</p><p>例如：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">PaintOptions</span> <span class="token punctuation">{</span>
  shape<span class="token operator">:</span> Shape<span class="token punctuation">;</span>
  xPos<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  yPos<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">paintShape</span><span class="token punctuation">(</span>opts<span class="token operator">:</span> PaintOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> shape <span class="token operator">=</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">paintShape</span><span class="token punctuation">(</span><span class="token punctuation">{</span> shape <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">paintShape</span><span class="token punctuation">(</span><span class="token punctuation">{</span> shape<span class="token punctuation">,</span> xPos<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">paintShape</span><span class="token punctuation">(</span><span class="token punctuation">{</span> shape<span class="token punctuation">,</span> yPos<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">paintShape</span><span class="token punctuation">(</span><span class="token punctuation">{</span> shape<span class="token punctuation">,</span> xPos<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> yPos<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个例子中，<code>xPos</code> 和 <code>yPos</code> 都被认为是可选的。我们可以选择提供它们中的任何一个，因此上面对 <code>paintShape</code> 的每个调用都是有效的。所有可选性真正表明的是，如果属性被设置，则它必须具有特定的类型。</p><p>我们也可以从这些属性中读取值——但是当我们在 <code>strictNullChecks</code> 下这样做时，<code>TypeScript</code> 会告诉我们它们可能是未定义的。例如：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">paintShape</span><span class="token punctuation">(</span>opts<span class="token operator">:</span> PaintOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> xPos <span class="token operator">=</span> opts<span class="token punctuation">.</span>xPos<span class="token punctuation">;</span>
  <span class="token comment">// (property) PaintOptions.xPos?: number | undefined</span>

  <span class="token keyword">let</span> yPos <span class="token operator">=</span> opts<span class="token punctuation">.</span>yPos<span class="token punctuation">;</span>
  <span class="token comment">// (property) PaintOptions.yPos?: number | undefined</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>JavaScript</code> 中，即使属性从未设置，我们仍然可以访问它——它只会给我们 <code>undefined</code> 值。我们可以特别处理 <code>undefined</code>。例如：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">paintShape</span><span class="token punctuation">(</span>opts<span class="token operator">:</span> PaintOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> xPos <span class="token operator">=</span> opts<span class="token punctuation">.</span>xPos <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> opts<span class="token punctuation">.</span>xPos<span class="token punctuation">;</span>
  <span class="token comment">// let xPos: number;</span>
  <span class="token keyword">let</span> yPos <span class="token operator">=</span> opts<span class="token punctuation">.</span>yPos <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> opts<span class="token punctuation">.</span>yPos<span class="token punctuation">;</span>
  <span class="token comment">// let yPos: number;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请注意，为未指定的值设置默认值的此模式非常常见，<code>JavaScript</code> 具有支持它的语法。例如：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">paintShape</span><span class="token punctuation">(</span><span class="token punctuation">{</span> shape<span class="token punctuation">,</span> xPos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> yPos <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token operator">:</span> PaintOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;x coordinate at&quot;</span><span class="token punctuation">,</span> xPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// (parameter) xPos: number</span>

  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;y coordinate at&quot;</span><span class="token punctuation">,</span> yPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// (parameter) yPos: number</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用解构模式和默认值" tabindex="-1"><a class="header-anchor" href="#使用解构模式和默认值" aria-hidden="true">#</a> 使用解构模式和默认值</h3><p>在<code>paintShape</code>的参数中，我们使用了解构模式，并为<code>xPos</code>和<code>yPos</code>提供了默认值。现在，在<code>paintShape</code>的函数体中，<code>xPos</code>和<code>yPos</code>都是必不可少的，但对于任何调用<code>paintShape</code>的人来说是可选的。</p><blockquote><p>请注意，目前无法在解构模式中放置类型注释。这是因为在<code>JavaScript</code>中以下语法已经有了不同的含义。</p></blockquote><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">{</span> shape<span class="token operator">:</span> Shape<span class="token punctuation">,</span> xPos<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment">/*...*/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span>shape<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Cannot find name &#39;shape&#39;. Did you mean &#39;Shape&#39;?</span>
  <span class="token function">render</span><span class="token punctuation">(</span>xPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Cannot find name &#39;xPos&#39;.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在对象解构模式中，<code>shape: Shape</code> 表示“获取属性 <code>shape</code> 并将其重定义为名为 <code>Shape</code> 的局部变量。同样，<code>xPos: number</code> 创建了一个名为 <code>number</code> 的变量，其值基于参数的 xPos。</p><p>使用映射修饰符，您可以删除可选属性。</p><h3 id="readonly-属性" tabindex="-1"><a class="header-anchor" href="#readonly-属性" aria-hidden="true">#</a> <code>readonly</code> 属性</h3><p><code>TypeScript</code> 中的属性也可以标记为 <code>readonly</code>。虽然它不会在运行时改变任何行为，但被标记为 <code>readonly</code> 的属性在类型检查期间不能被写入。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">SomeType</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> prop<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> SomeType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 我们可以读取 &#39;obj.prop&#39; 的值。</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">prop has the value &#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>obj<span class="token punctuation">.</span>prop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 但我们不能重新分配它。</span>
  obj<span class="token punctuation">.</span>prop <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// 报错：Cannot assign to &#39;prop&#39; because it is a read-only property.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 <code>readonly</code> 修饰符并不一定意味着该值完全不可变，或者换句话说，其内部内容不能被更改。它只是意味着该属性本身不能被重写。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Home</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> resident<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">visitForBirthday</span><span class="token punctuation">(</span>home<span class="token operator">:</span> Home<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 我们可以读取和更新 &#39;home.resident&#39; 的属性。</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Happy birthday </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>home<span class="token punctuation">.</span>resident<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  home<span class="token punctuation">.</span>resident<span class="token punctuation">.</span>age<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">evict</span><span class="token punctuation">(</span>home<span class="token operator">:</span> Home<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 但我们不能在 &#39;Home&#39; 上直接写入 &#39;resident&#39; 属性本身。</span>
  home<span class="token punctuation">.</span>resident <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Victor the Evictor&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 报错：Cannot assign to &#39;resident&#39; because it is a read-only property.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>readonly</code> 的含义需要管理预期。它在 <code>TypeScript</code> 的开发期间有助于标志对象的使用方式。<code>TypeScript</code> 在检查两种类型是否兼容时不考虑两种类型的属性是否为 <code>readonly</code>，因此 <code>readonly</code> 属性也可以通过别名更改。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ReadonlyPerson</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> writablePerson<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;Person McPersonface&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// works</span>
<span class="token keyword">let</span> readonlyPerson<span class="token operator">:</span> ReadonlyPerson <span class="token operator">=</span> writablePerson<span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>readonlyPerson<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &#39;42&#39;</span>
writablePerson<span class="token punctuation">.</span>age<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>readonlyPerson<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &#39;43&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用映射修饰符，您可以删除 <code>readonly</code> 属性。</p><h3 id="索引签名" tabindex="-1"><a class="header-anchor" href="#索引签名" aria-hidden="true">#</a> 索引签名</h3><p>有时候你无法提前知道某个类型的属性的全部名称，但你确实知道值的形状。</p><p>在这种情况下，你可以使用索引签名来描述可能值的类型，例如：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">StringArray</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> myArray<span class="token operator">:</span> StringArray <span class="token operator">=</span> <span class="token function">getStringArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> secondItem <span class="token operator">=</span> myArray<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// const secondItem: string;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在上述代码中，我们有一个 <code>StringArray</code> 接口，它具有索引签名。这个索引签名声明了当使用数字对 <code>StringArray</code> 进行索引时，它将返回一个字符串。</p><p>只有一些类型可以用于索引签名属性：字符串、数字、符号、模板字符串模式以及仅由这些类型组成的联合类型。</p><p>可以支持这两种类型的索引器...</p><p>虽然字符串索引签名是描述“字典”模式的强大方式，但它们也强制所有属性与它们的返回类型匹配。这是因为字符串索引声明 <code>obj.property</code> 也可以使用 <code>obj[&quot;property&quot;]</code>来访问。在以下示例中，<code>name</code> 的类型与字符串索引的类型不匹配，类型检查器会报错：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">NumberDictionary</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">// Property &#39;name&#39; of type &#39;string&#39; is not assignable to &#39;string&#39; index type &#39;number&#39;.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但是，如果索引签名是属性类型的联合类型，则不同类型的属性是可以接受的：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">NumberOrStringDictionary</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// ok, length is a number</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// ok, name is a string</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后，您可以将索引签名设置为只读，以防止对其索引进行赋值：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ReadonlyStringArray</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myArray<span class="token operator">:</span> ReadonlyStringArray <span class="token operator">=</span> <span class="token function">getReadOnlyStringArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myArray<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Mallory&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// Index signature in type &#39;ReadonlyStringArray&#39; only permits reading.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>由于索引签名是只读的，因此无法设置 <code>myArray[2]</code>。</p><h2 id="扩展类型" tabindex="-1"><a class="header-anchor" href="#扩展类型" aria-hidden="true">#</a> 扩展类型</h2><p>拥有一些更具体版本的类型是很常见的。例如，我们可能有一个 <code>BasicAddress</code> 类型，用于描述邮寄信件和包裹到美国所需的字段。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">BasicAddress</span> <span class="token punctuation">{</span>
  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  street<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  city<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  country<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  postalCode<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在某些情况下，这就足够了，但是地址通常会与单元号相关联，如果地址中的建筑物有多个单元。于是我们可以描述一个 <code>AddressWithUnit</code>。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">AddressWithUnit</span> <span class="token punctuation">{</span>
  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  unit<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  street<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  city<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  country<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  postalCode<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样做可以完成任务，但是缺点在于，当我们的更改仅仅是增加时，我们不得不重复所有其他来自 <code>BasicAddress</code> 的字段。相反，我们可以扩展原始的 <code>BasicAddress</code> 类型，并只添加 <code>AddressWithUnit</code> 独有的新字段。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">BasicAddress</span> <span class="token punctuation">{</span>
  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  street<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  city<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  country<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  postalCode<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">AddressWithUnit</span> <span class="token keyword">extends</span> <span class="token class-name">BasicAddress</span> <span class="token punctuation">{</span>
  unit<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>extends</code> 关键字允许我们有效地从其他命名类型复制成员，并添加我们想要的任何新成员。这对于减少我们必须编写的类型声明模板代码以及表明多个相同属性的不同声明可能相关的意图非常有用。例如，<code>AddressWithUnit</code> 不需要重复 <code>street</code> 属性，而且由于 <code>street</code> 来源于 <code>BasicAddress</code>，读者将会知道这两种类型在某种程度上是相关的。</p><p>接口也可以从多个类型扩展。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Colorful</span> <span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ColorfulCircle</span> <span class="token keyword">extends</span> <span class="token class-name">Colorful</span><span class="token punctuation">,</span> Circle <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">const</span> cc<span class="token operator">:</span> ColorfulCircle <span class="token operator">=</span> <span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span>
  radius<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="交叉类型" tabindex="-1"><a class="header-anchor" href="#交叉类型" aria-hidden="true">#</a> 交叉类型</h2><p>接口允许我们通过扩展其他类型来建立新的类型。<code>TypeScript</code> 提供了另一种构造，称为交叉类型，主要用于组合现有的对象类型。</p><p>使用<code>&amp;</code>运算符定义交叉类型。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Colorful</span> <span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ColorfulCircle</span> <span class="token operator">=</span> Colorful <span class="token operator">&amp;</span> Circle<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这里，我们交叉了 <code>Colorful</code> 和 <code>Circle</code>，产生了一个新的类型，该类型具有 <code>Colorful</code> 和 <code>Circle</code> 的所有成员。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span>circle<span class="token operator">:</span> Colorful <span class="token operator">&amp;</span> Circle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Color was </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>circle<span class="token punctuation">.</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Radius was </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>circle<span class="token punctuation">.</span>radius<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 可以</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span> radius<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 错了</span>
<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> raidus<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 类型“{ color: string; raidus: number; }”的参数不能赋给类型“Colorful &amp; Circle”的参数。</span>
<span class="token comment">// 对象文字可以只指定已知属性，但“raidus”不存在于类型“Colorful &amp; Circle”中。是否要写“radius”？</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="接口-vs-交叉类型" tabindex="-1"><a class="header-anchor" href="#接口-vs-交叉类型" aria-hidden="true">#</a> 接口 vs. 交叉类型</h3><p>我们刚刚看了两种类似但实际上略有不同的组合类型的方法。通过接口，我们可以使用扩展子句从其他类型进行扩展，而使用交叉类型可以进行类似的操作，并将结果命名为交叉类型的类型别名。两者之间的主要区别在于如何处理冲突，而这种差异通常是您在接口和交叉类型的类型别名之间选择一个而不是另一个的主要原因之一。</p><h2 id="通用对象类型" tabindex="-1"><a class="header-anchor" href="#通用对象类型" aria-hidden="true">#</a> 通用对象类型</h2><p>假设有一种 <code>Box</code> 类型，它可以包含任何值 - 字符串，数字，长颈鹿等等。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Box</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>目前，<code>contents</code> 属性被定义为 <code>any</code> 类型，这样做可以工作，但是可能会在后续出现意外。</p><p>我们可以改用 <code>unknown</code> 类型，但这意味着在我们已经知道 <code>contents</code> 的类型的情况下，我们需要进行预防性检查，或使用易错的类型断言。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Box</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x<span class="token operator">:</span> Box <span class="token operator">=</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//我们可以检查&#39;x.contents&#39;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x<span class="token punctuation">.</span>contents <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>contents<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//或者我们可以使用类型断言</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>contents <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>一种类型安全的方法是为每种类型的 <code>contents</code> 创建不同的 <code>Box</code> 类型。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">NumberBox</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">StringBox</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">BooleanBox</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但这意味着我们将不得不创建不同的函数或函数重载来操作这些类型。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">setContents</span><span class="token punctuation">(</span>box<span class="token operator">:</span> StringBox<span class="token punctuation">,</span> newContents<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">setContents</span><span class="token punctuation">(</span>box<span class="token operator">:</span> NumberBox<span class="token punctuation">,</span> newContents<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">setContents</span><span class="token punctuation">(</span>box<span class="token operator">:</span> BooleanBox<span class="token punctuation">,</span> newContents<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">setContents</span><span class="token punctuation">(</span>box<span class="token operator">:</span> <span class="token punctuation">{</span> contents<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> newContents<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  box<span class="token punctuation">.</span>contents <span class="token operator">=</span> newContents<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这是很多重复的样板代码。而且，我们可能需要引入新的类型和重载。这很令人沮丧，因为我们的 <code>box</code> 类型和重载实际上都是相同的。</p><p>相反，我们可以制作一个声明了类型参数的通用 <code>Box</code> 类型。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> Type<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你可以将其理解为“<code>Type</code> 类型的 <code>Box</code> 是一种其 <code>contents</code> 具有 <code>Type</code> 类型的东西”。稍后，当我们提到 <code>Box</code> 时，我们必须在 <code>Type</code> 的位置上给出一个类型参数。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">let</span> box<span class="token operator">:</span> Box<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>将 <code>Box</code> 看作是一个真实类型的模板，其中 <code>Type</code> 是一个占位符，将被替换为其他某种类型。当 <code>TypeScript</code> 看到 <code>Box&lt;string&gt;</code>时，它将用 <code>string</code> 替换 <code>Box&lt;Type&gt;</code>中的每个 <code>Type</code> 实例，并最终与类似于<code>{contents:string}</code>的东西一起工作。换句话说，<code>Box&lt;string&gt;</code>和我们之前的 <code>StringBox</code> 具有相同的功能。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> Type<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">StringBox</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> boxA<span class="token operator">:</span> Box<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span> contents<span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// boxA.contents;</span>
<span class="token comment">// (property) Box&lt;string&gt;.contents: string</span>

<span class="token keyword">let</span> boxB<span class="token operator">:</span> StringBox <span class="token operator">=</span> <span class="token punctuation">{</span> contents<span class="token operator">:</span> <span class="token string">&quot;world&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// boxB.contents;</span>
<span class="token comment">// (property) StringBox.contents: string</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Box</code> 是可重用的，因为 <code>Type</code> 可以替换为任何东西。这意味着当我们需要一个新类型的盒子时，我们根本不需要声明一个新的 <code>Box</code> 类型（尽管如果我们想的话，我们当然可以声明一个新的类型）。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> Type<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Apple</span> <span class="token punctuation">{</span>
  <span class="token comment">// ....</span>
<span class="token punctuation">}</span>

<span class="token comment">//与&#39;{contents：Apple}&#39;相同。</span>
<span class="token keyword">type</span> <span class="token class-name">AppleBox</span> <span class="token operator">=</span> Box<span class="token operator">&lt;</span>Apple<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这也意味着我们可以通过使用泛型函数而完全避免重载。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">setContents</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>box<span class="token operator">:</span> Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span><span class="token punctuation">,</span> newContents<span class="token operator">:</span> Type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  box<span class="token punctuation">.</span>contents <span class="token operator">=</span> newContents<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>值得注意的是，类型别名也可以是泛型的。我们可以用一个类型别名来定义我们的新 <code>Box&lt;Type&gt;</code>接口，即：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> Type<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用类型别名代替接口:</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> Type<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>由于类型别名不像接口那样仅描述对象类型，因此我们还可以使用它们来编写其他类型的通用辅助类型。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">OrNull<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> Type <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">OneOrMany<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> Type <span class="token operator">|</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">OneOrManyOrNull<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> OrNull<span class="token operator">&lt;</span>OneOrMany<span class="token operator">&lt;</span>Type<span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">OneOrManyOrNullStrings</span> <span class="token operator">=</span> OneOrManyOrNull<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">OneOrManyOrNullStrings</span> <span class="token operator">=</span> OneOrMany<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>稍后我们将回到类型别名。</p><h3 id="数组类型" tabindex="-1"><a class="header-anchor" href="#数组类型" aria-hidden="true">#</a> 数组类型</h3><p>通常情况下，泛型对象类型是某种独立于其包含元素类型的容器类型。这样做是为了使数据结构能够跨不同的数据类型重复使用。</p><p>事实上，我们一直在本手册中使用一种类似的类型：数组类型。每当我们编写像 <code>number[]</code> 或 <code>string[]</code> 这样的类型时，它实际上只是 <code>Array&lt;number&gt;</code> 和 <code>Array&lt;string&gt;</code> 的简写。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myArray<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 以下两种方式都可以！</span>
<span class="token function">doSomething</span><span class="token punctuation">(</span>myArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Array</span></span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>与上面的 <code>Box</code> 类型类似，<code>Array</code> 本身也是一个泛型类型。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name"><span class="token builtin">Array</span><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * 获取或设置数组的长度。
   */</span>
  length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  <span class="token doc-comment comment">/**
   * 从数组中移除最后一个元素并返回它。
   */</span>
  <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Type <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

  <span class="token doc-comment comment">/**
   * 向数组追加新元素，并返回数组的新长度。
   */</span>
  <span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>items<span class="token operator">:</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现代 <code>JavaScript</code> 还提供了其他泛型数据结构，例如 <code>Map&lt;K, V&gt;</code>、<code>Set&lt;T&gt;</code> 和 <code>Promise&lt;T&gt;</code>。所有这些都意味着，由于 <code>Map</code>、<code>Set</code> 和 <code>Promise</code> 的行为方式，它们可以与任何类型集合一起使用。</p><h2 id="readonlyarray-类型" tabindex="-1"><a class="header-anchor" href="#readonlyarray-类型" aria-hidden="true">#</a> <code>ReadonlyArray</code> 类型</h2><p><code>ReadonlyArray</code> 是一种特殊类型，用于描述不应更改的数组。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doStuff</span><span class="token punctuation">(</span>values<span class="token operator">:</span> ReadonlyArray<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//我们可以从&#39;values&#39;中读取…</span>
  <span class="token keyword">const</span> copy <span class="token operator">=</span> values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">第一个值是 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//…但我们无法更改&#39;values&#39;。</span>
  values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Property &#39;push&#39; does not exist on type &#39;readonly string[]&#39;.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>类似于属性的 <code>readonly</code> 修改符，它主要是一个表达意图的工具。当我们看到一个返回 <code>ReadonlyArrays</code> 的函数时，它告诉我们我们不应该改变其内容，当我们看到一个消耗 <code>ReadonlyArrays</code> 的函数时，它告诉我们我们可以将任何数组传递到该函数中，而不必担心它会改变其内容。</p><p>与 <code>Array</code> 不同，我们不能使用 <code>ReadonlyArray</code> 构造函数。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">new</span> <span class="token class-name">ReadonlyArray</span><span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &#39;ReadonlyArray&#39; only refers to a type, but is being used as a value here.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>相反，我们可以将常规数组分配给 <code>ReadonlyArrays。</code></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> roArray<span class="token operator">:</span> ReadonlyArray<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>就像 <code>TypeScript</code> 为 <code>Array&lt;Type&gt;</code>提供 <code>Type[]</code>的简写语法一样，它也为 <code>ReadonlyArray&lt;Type&gt;</code>提供 <code>readonly Type[]</code>的简写语法。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doStuff</span><span class="token punctuation">(</span>values<span class="token operator">:</span> <span class="token keyword">readonly</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//我们可以从&#39;values&#39;中读取…</span>
  <span class="token keyword">const</span> copy <span class="token operator">=</span> values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">第一个值是 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//…但我们无法更改&#39;values&#39;。</span>
  values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Property &#39;push&#39; does not exist on type &#39;readonly string[]&#39;.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后要注意的一点是，与属性的 <code>readonly</code> 修改符不同，常规数组和 <code>ReadonlyArrays</code> 之间的可赋值性不是双向的。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token keyword">readonly</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

x <span class="token operator">=</span> y<span class="token punctuation">;</span>
y <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token comment">// The type &#39;readonly string[]&#39; is &#39;readonly&#39; and cannot be assigned to the mutable type &#39;string[]&#39;.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="元组类型" tabindex="-1"><a class="header-anchor" href="#元组类型" aria-hidden="true">#</a> 元组类型</h3><p>元组类型是另一种数组类型，它确切地知道它包含多少个元素，以及在特定位置包含哪些类型。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">StringNumberPair</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在这里，<code>StringNumberPair</code> 是一个由字符串和数字组成的元组类型。与 <code>ReadonlyArray</code> 一样，它在运行时没有表示，但对于 <code>TypeScript</code> 很重要。对于类型系统而言，<code>StringNumberPair</code> 描述了其 <code>0</code> 索引包含字符串，而 <code>1</code> 索引包含数字的数组。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>pair<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> a <span class="token operator">=</span> pair<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> b <span class="token operator">=</span> pair<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果我们尝试超出元素数量进行索引，我们将会得到一个错误。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>pair<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">const</span> c <span class="token operator">=</span> pair<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// 元组类型 &#39;[string, number]&#39; 的长度为 &#39;2&#39;，没有索引为 &#39;2&#39; 的元素。</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们也可以使用 <code>JavaScript</code> 的数组解构来解构元组。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>stringHash<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>inputString<span class="token punctuation">,</span> hash<span class="token punctuation">]</span> <span class="token operator">=</span> stringHash<span class="token punctuation">;</span>

  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inputString<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>在高度基于约定的 <code>API</code> 中，元组类型非常有用，每个元素的含义都是“显而易见”的。这使我们在解构时可以为变量命名任何我们想要的元素 <code>0</code> 和 <code>1</code>。</p></blockquote><blockquote><p>然而，由于并非每个用户都持有相同的观点，因此重新考虑使用具有描述性属性名称的对象是否更适合您的 <code>API</code> 可能会更好。</p></blockquote><p>除了长度检查外，像这样的简单元组类型等效于为特定索引声明属性并使用数字字面类型声明长度的数组版本的类型。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// 译者注: 上面这段话的意思是，简单的元组类型（如上面例子中的StringNumberPair）和数组类型是等价的，只是数组类型会声明特定索引位置的属性，并使用数字字面量类型来声明长度。</span>
<span class="token keyword">interface</span> <span class="token class-name">StringNumberPair</span> <span class="token punctuation">{</span>
  <span class="token comment">// 专用属性</span>
  length<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  <span class="token comment">// 其他 &#39;Array&lt;string | number&gt;&#39; 成员...</span>
  <span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> end<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>元组可以通过在元素类型后面写一个问号（<code>?</code>）来拥有可选属性。可选元素只能出现在最后，并且影响长度的类型。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Either2dOr3d</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">?</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">setCoordinate</span><span class="token punctuation">(</span>coord<span class="token operator">:</span> Either2dOr3d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">]</span> <span class="token operator">=</span> coord<span class="token punctuation">;</span>

  <span class="token keyword">const</span> z<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Provided coordinates had </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>coord<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> dimensions</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// (property) length: 2 | 3</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>元组也可以拥有剩余元素，剩余元素必须是数组/元组类型。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">StringNumberBooleans</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">StringBooleansNumber</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">BooleansStringNumber</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>StringNumberBooleans</code> 描述了一个元组，其前两个元素分别是字符串和数字，但其后可以有任意数量的布尔值。</p><p><code>StringBooleansNumber</code> 描述了一个元组，其第一个元素是字符串，然后是任意数量的布尔值，并以数字结尾。</p><p><code>BooleansStringNumber</code> 描述了一个元组，其开始元素是任意数量的布尔值，并以字符串和数字结尾。</p><p>带有剩余元素的元组没有固定的“长度”-它只有一组不同位置的已知元素。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> a<span class="token operator">:</span> StringNumberBooleans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b<span class="token operator">:</span> StringNumberBooleans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;beautiful&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> c<span class="token operator">:</span> StringNumberBooleans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为什么可选和剩余元素很有用？因为它允许 <code>TypeScript</code> 与参数列表对应。元组类型可以用于剩余参数和参数，使得以下内容：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">readButtonInput</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> version<span class="token punctuation">,</span> <span class="token operator">...</span>input<span class="token punctuation">]</span> <span class="token operator">=</span> args<span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>基本上等同于：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">readButtonInput</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> version<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token operator">...</span>input<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当你想要使用剩余参数获取可变数量的参数时，这非常方便，同时你需要一定数量的最小元素，但又不想引入中间变量。</p><h3 id="只读元组" tabindex="-1"><a class="header-anchor" href="#只读元组" aria-hidden="true">#</a> 只读元组</h3><p>关于 <code>tuple</code> 类型的最后一点注释 - <code>tuple</code> 类型有只读变体，可以在它们前面加上 <code>readonly</code> 修饰符来指定 - 就像使用数组简写语法一样。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>pair<span class="token operator">:</span> <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>像您预期的那样，在 <code>TypeScript</code> 中不允许写入只读元组的任何属性。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>pair<span class="token operator">:</span> <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  pair<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;hello!&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不能分配给“<code>0</code>”，因为它是只读属性。</p><p>在大多数代码中，元组往往被创建并保持不变，因此在可能的情况下将类型注释为只读元组是一个很好的默认选择。这也很重要，因为带有 <code>const</code> 断言的数组字面量将被推断为只读元组类型。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">let</span> point <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">distanceFromOrigin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>x <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> y <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">distanceFromOrigin</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 类型“readonly [3, 4]”的参数不能分配给类型“[number，number]”的参数。类型“readonly [3, 4]”是“readonly”，不能分配给可变类型“[number，number]”。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这里，<code>distanceFromOrigin</code> 从未修改其元素，但期望可变元组。由于 <code>point</code> 的类型被推断为 <code>readonly [3, 4]</code>，所以它不会与<code>[number，number]</code>兼容，因为该类型不能保证 <code>point</code> 的元素不会被修改。</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: libra085925@gmail.com">Libra</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/typescript-zh/guide/moreOnFunctions.html" class="" aria-label="关于函数的更多内容"><!--[--><!--]--> 关于函数的更多内容 <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/typescript-zh/assets/app-b562695e.js" defer></script>
  </body>
</html>
